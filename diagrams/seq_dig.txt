# Data Flow Diagram (DFD - Level 1)
dfd = Digraph('DataFlowDiagram', format='png')
dfd.attr(rankdir='TB', style='filled', color='lightgrey')

# Entities
dfd.node('User', shape='parallelogram', style='filled', color='lightblue')
dfd.node('System', 'Oratis System', shape='box', style='filled', color='lightyellow')
dfd.node('AI', 'AI Modules (Speech & Non-Verbal Analysis)', shape='box', style='filled', color='lightgreen')
dfd.node('DB', 'Database (User Data & Scores)', shape='cylinder', style='filled', color='lightpink')

# Connections
dfd.edge('User', 'System', label='Inputs Speech & Gestures')
dfd.edge('System', 'AI', label='Processes Data')
dfd.edge('AI', 'System', label='Returns Analysis')
dfd.edge('System', 'DB', label='Stores Results')
dfd.edge('DB', 'System', label='Retrieves Past Data')
dfd.edge('System', 'User', label='Shows Feedback')

# Render the diagram
dfd_path = "/mnt/data/data_flow_diagram"
dfd.render(dfd_path)

dfd_path + ".png"
